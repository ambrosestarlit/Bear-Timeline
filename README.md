# ⏱️ Starlit Timeline Editor v2.3.0

**3分割アーキテクチャ版 + 複数選択＆シーンまとめ機能**

## 🎯 v2.3.0 の新機能

### ✨ 複数選択機能
- **Shift + クリック** でクリップを複数選択可能
- 選択されたクリップは金色の枠で強調表示
- 複数のクリップをまとめて操作できます

### 🎬 シーンまとめ機能
- 選択したクリップを **右クリック** でメニュー表示
- **新規シーンにまとめる**: 選択したクリップを新しいシーンに移動
- **既存のシーンに移動**: 選択したクリップを既存のシーンに移動

### 🔧 修正
- シーン切り替え後、タイムラインが即座に更新されるように改善

## 📁 ファイル構成

```
StarlitTimelineEditor_v2.3.0/
├── index.html                      # メインHTML
├── styles.css                      # スタイルシート
│
├── app.js                          # メインアプリ（統合・初期化）- 40行
├── app-core.js                     # 既存の完成済み機能 - 9,000行
├── app-extensions.js               # 新機能専用 - 拡張可能
│
└── modules/
    ├── clipping.js                 # クリッピング機能
    ├── sceneManager.js             # シーン管理機能
    └── utils/
        ├── math.js                 # 数学ヘルパー
        ├── drawing.js              # 描画ヘルパー
        └── storage.js              # localStorage
```

## 🎯 アーキテクチャの特徴

### 1. app.js（メインアプリ）
- **役割**: 統合・初期化のみ
- **サイズ**: 約40行
- **内容**: StarlitTimelineAppを継承してExtensionsを統合

### 2. app-core.js（既存機能）
- **役割**: 完成済みの全機能
- **サイズ**: 約9,000行
- **内容**: 
  - タイムライン描画
  - プレビュー描画
  - 素材管理
  - クリップ管理
  - キーフレーム
  - エフェクト
  - 書き出し
  - プロジェクト管理
  - その他すべて

### 3. app-extensions.js（新機能）
- **役割**: これから追加する機能専用
- **サイズ**: 約350行（複数選択＆シーンまとめ機能実装）
- **内容**: 
  - 複数選択機能
  - シーンまとめ機能
  - 右クリックメニューカスタマイズ

## ✨ メリット

1. ✅ **既存機能は完全保護** - app-core.jsは触らない
2. ✅ **新機能は分離** - app-extensions.jsに追加
3. ✅ **シンプル** - 3ファイル構成で見通しが良い
4. ✅ **拡張性** - 必要に応じてapp-coreも分割可能
5. ✅ **メンテナンス容易** - 責任範囲が明確

## 🚀 新機能の使い方

### 複数選択
1. **Shift キー** を押しながらクリップをクリック
2. 複数のクリップが金色の枠で選択される
3. 空白をクリックで選択解除

### シーンにまとめる
1. クリップを複数選択（Shift + クリック）
2. 選択したクリップを **右クリック**
3. メニューから選択:
   - **✨ 新規シーンにまとめる**: 新しいシーン名を入力して作成
   - **📦 既存のシーンに移動**: 移動先のシーンを選択

## 📝 開発ガイド

### 既存機能の修正が必要な場合
→ `app-core.js` を編集

### 新機能を追加する場合
→ `app-extensions.js` に追加

### 完全に独立した機能を追加する場合
→ `modules/` に新しいファイルを作成

## 🔄 将来の拡張

app-coreが大きくなりすぎたら、さらに分割可能：

```
app-core-timeline.js     # タイムライン関連
app-core-preview.js      # プレビュー関連
app-core-effects.js      # エフェクト関連
...
```

## 📌 バージョン履歴

- **v2.3.0**: 複数選択＆シーンまとめ機能、シーン切り替え修正
- **v2.2.0**: 3分割アーキテクチャ導入
- **v2.0.0**: 基本機能完成
- **v1.0.0**: 初版リリース

---

**Version**: 2.3.0  
**Architecture**: Core + Extensions  
**Author**: アンブローズ様
